var E=class extends Map{set(e,s){return super.set(e,s),s}},u=class extends WeakMap{set(e,s){return super.set(e,s),s}};var Y=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,Z=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/?)>/g,V=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,tt=/[\x01\x02]/g,T=(t,e,s)=>{let r=0;return t.join("").trim().replace(Z,(i,o,a,l)=>{let n=o+a.replace(V,"=$2$1").trimEnd();return l.length&&(n+=s||Y.test(o)?" /":"></"+o),"<"+n+">"}).replace(tt,i=>i===""?"<!--"+e+r+++"-->":e+r++)};var et=({firstChild:t,lastChild:e})=>{let s=document.createRange();return s.setStartAfter(t),s.setEndAfter(e),s.deleteContents(),t},O=(t,e)=>t.nodeType===111?1/e<0?e?et(t):t.lastChild:e?t.valueOf():t.firstChild:t,S=t=>{let{firstChild:e,lastChild:s}=t;if(e===s)return s||t;let{childNodes:r}=t,i=[...r];return{ELEMENT_NODE:1,nodeType:111,firstChild:e,lastChild:s,valueOf(){return r.length!==i.length&&t.append(...i),t}}};var{isArray:w}=Array,{indexOf:vt,slice:At}=[];var L=!1,$=class{constructor(e,s){L=!0,this._=(...r)=>e(...r,s)}};var M=t=>e=>{for(let s in e){let r=s==="role"?s:`aria-${s}`,i=e[s];i==null?t.removeAttribute(r):t.setAttribute(r,i)}},k=(t,e)=>{let s,r=!0,i=document.createAttributeNS(null,e);return o=>{if(s!==o)if(s=o,s==null)r||(t.removeAttributeNode(i),r=!0);else{let a=L&&o instanceof $?o._(t,e):o;a==null?(r||t.removeAttributeNode(i),r=!0):(i.value=a,r&&(t.setAttributeNodeNS(i),r=!1))}}},P=(t,e,s)=>r=>{s!==!!r&&((s=!!r)?t.setAttribute(e,""):t.removeAttribute(e))},st=({dataset:t})=>e=>{for(let s in e){let r=e[s];r==null?delete t[s]:t[s]=r}},C=(t,e)=>{let s,r,i=e.slice(2);return!(e in t)&&(r=e.toLowerCase())in t&&(i=r.slice(2)),o=>{let a=w(o)?o:[o,!1];s!==a[0]&&(s&&t.removeEventListener(i,s,a[1]),(s=a[0])&&t.addEventListener(i,s,a[1]))}},R=t=>{let e;return s=>{e!==s&&(e=s,typeof s=="function"?s(t):s.current=t)}},j=(t,e)=>e==="dataset"?st(t):s=>{t[e]=s},B=t=>{let e;return s=>{e!=s&&(e=s,t.textContent=s??"")}};var F=(t,e,s,r,i)=>{let o=s.length,a=e.length,l=o,n=0,c=0,f=null;for(;n<a||c<l;)if(a===n){let h=l<o?c?r(s[c-1],-0).nextSibling:r(s[l-c],0):i;for(;c<l;)t.insertBefore(r(s[c++],1),h)}else if(l===c)for(;n<a;)(!f||!f.has(e[n]))&&t.removeChild(r(e[n],-1)),n++;else if(e[n]===s[c])n++,c++;else if(e[a-1]===s[l-1])a--,l--;else if(e[n]===s[l-1]&&s[c]===e[a-1]){let h=r(e[--a],-1).nextSibling;t.insertBefore(r(s[c++],1),r(e[n++],-1).nextSibling),t.insertBefore(r(s[--l],1),h),e[a]=s[l]}else{if(!f){f=new Map;let h=c;for(;h<l;)f.set(s[h],h++)}if(f.has(e[n])){let h=f.get(e[n]);if(c<h&&h<l){let d=n,x=1;for(;++d<a&&d<l&&f.get(e[d])===h+x;)x++;if(x>h-c){let X=r(e[n],0);for(;c<h;)t.insertBefore(r(s[c++],1),X)}else t.replaceChild(r(s[c++],1),r(e[n++],-1))}else n++}else t.removeChild(r(e[n++],-1))}return s};var{isArray:A,prototype:rt}=Array,{indexOf:H}=rt;var{createDocumentFragment:nt,createElement:it,createElementNS:ot,createTextNode:D,createTreeWalker:W,importNode:q}=new Proxy(document,{get:(t,e)=>t[e].bind(t)});var ct=t=>{let e=it("template");return e.innerHTML=t,e.content},v,lt=t=>{v||(v=ot("http://www.w3.org/2000/svg","svg")),v.innerHTML=t;let e=nt();return e.append(...v.childNodes),e},z=(t,e)=>e?lt(t):ct(t);var ft=({childNodes:t},e)=>t[e],y=(t,e,s)=>F(t.parentNode,e,s,O,t),at=t=>{let e,s,r=[],i=o=>{switch(typeof o){case"string":case"number":case"boolean":e!==o&&(e=o,s||(s=D("")),s.data=o,r=y(t,r,[s]));break;case"object":case"undefined":if(o==null){e!=o&&(e=o,r=y(t,r,[]));break}if(A(o)){e=o,o.length===0?r=y(t,r,[]):typeof o[0]=="object"?r=y(t,r,o):i(String(o));break}e!==o&&"ELEMENT_NODE"in o&&(e=o,r=y(t,r,o.nodeType===11?[...o.childNodes]:[o]));break;case"function":i(o(t));break}};return i},ht=(t,e)=>{switch(e[0]){case"?":return P(t,e.slice(1),!1);case".":return j(t,e.slice(1));case"@":return C(t,"on"+e.slice(1));case"o":if(e[1]==="n")return C(t,e)}switch(e){case"ref":return R(t);case"aria":return M(t)}return k(t,e)};function I(t){let{type:e,path:s}=t,r=s.reduceRight(ft,this);return e==="node"?at(r):e==="attr"?ht(r,t.name):B(r)}var N=t=>{let e=[],{parentNode:s}=t;for(;s;)e.push(H.call(s.childNodes,t)),t=s,{parentNode:s}=t;return e},g="is\xB5",G=new u,dt=/^(?:textarea|script|style|title|plaintext|xmp)$/,m=()=>({stack:[],entry:null,wire:null}),ut=(t,e)=>{let{content:s,updates:r}=xt(t,e);return{type:t,template:e,content:s,updates:r,wire:null}},pt=(t,e)=>{let s=t==="svg",r=T(e,g,s),i=z(r,s),o=W(i,129),a=[],l=e.length-1,n=0,c=`${g}${n}`;for(;n<l;){let f=o.nextNode();if(!f)throw`bad template: ${r}`;if(f.nodeType===8)f.data===c&&(a.push({type:"node",path:N(f)}),c=`${g}${++n}`);else{for(;f.hasAttribute(c);)a.push({type:"attr",path:N(f),name:f.getAttribute(c)}),f.removeAttribute(c),c=`${g}${++n}`;dt.test(f.localName)&&f.textContent.trim()===`<!--${c}-->`&&(f.textContent="",a.push({type:"text",path:N(f)}),c=`${g}${++n}`)}}return{content:i,nodes:a}},xt=(t,e)=>{let{content:s,nodes:r}=G.get(e)||G.set(e,pt(t,e)),i=q(s,!0),o=r.map(I,i);return{content:i,updates:o}},b=(t,{type:e,template:s,values:r})=>{let i=U(t,r),{entry:o}=t;(!o||o.template!==s||o.type!==e)&&(t.entry=o=ut(e,s));let{content:a,updates:l,wire:n}=o;for(let c=0;c<i;c++)l[c](r[c]);return n||(o.wire=S(a))},U=({stack:t},e)=>{let{length:s}=e;for(let r=0;r<s;r++){let i=e[r];i instanceof p?e[r]=b(t[r]||(t[r]=m()),i):A(i)?U(t[r]||(t[r]=m()),i):t[r]=null}return s<t.length&&t.splice(s),s},p=class{constructor(e,s,r){this.type=e,this.template=s,this.values=r}};var K=t=>{let e=new u,s=r=>(i,...o)=>b(r,{type:t,template:i,values:o});return Object.assign((r,...i)=>new p(t,r,i),{for(r,i){let o=e.get(r)||e.set(r,new E);return o.get(i)||o.set(i,s(m()))},node:(r,...i)=>b(m(),new p(t,r,i)).valueOf()})},J=new u,Q=(t,e)=>{let s=typeof e=="function"?e():e,r=J.get(t)||J.set(t,m()),i=s instanceof p?b(r,s):s;return i!==r.wire&&(r.wire=i,t.replaceChildren(i.valueOf())),t},_=K("html"),mt=K("svg");function yt(t){let e=t?.extends?t.extends[0]:HTMLElement,s=t?.extends?t.extends[1]:void 0,r=Object.keys(t.props||{}),i=new Event("update");class o extends e{constructor(){super(),Object.assign(this,t),this.shadow===!1?this.root=this:(this.attachShadow({mode:"open"}),this.root=this.shadowRoot),typeof this.props=="object"&&this.defineProps(),typeof this.state=="function"&&this.defineState(),typeof this.intersected=="function"&&this.handleintersected(),this.refs={}}connectedCallback(){this.addEventListener("update",this.debounce(this.render)),this.dispatchEvent(i),typeof this.created=="function"&&this.created()}defineProps(){r.forEach(l=>{let[n,c]=this.props[l];Object.defineProperty(this,l,{get:()=>{let f=this.getAttribute(l)||c;switch(n){case String:return f;case Boolean:return[!0,"true"].includes(f);default:return n(f)}},set:f=>{this.setAttribute(l,f),typeof this.changed=="function"&&this.changed({name:l,old:this[l],new:f})}})})}static get observedAttributes(){return r}attributeChangedCallback(l,n,c){typeof this.changed=="function"&&this.changed({name:l,old:n,new:c}),this.dispatchEvent(i)}defineState(){let l=n=>{if(n===null||typeof n!="object")return n;for(let c in n)n[c]=l(n[c]);return new Proxy(n,{get:(c,f)=>c[f],set:(c,f,h)=>(c[f]=l(h),this.dispatchEvent(i),!0),deleteProperty:(c,f)=>(delete c[f],this.dispatchEvent(i),!0)})};this._state=l(this.state()),delete this.state,Object.keys(this._state).forEach(n=>{Object.defineProperty(this,n,{get:()=>this._state[n],set:c=>this._state[n]=c})})}context(l){if(this._ctx||(this._ctx={}),this._ctx[l])return this._ctx[l];{let n=(c,f=this)=>{function h(d){if(!d||d===document||d===window)return null;let x=d.closest(c);return x||h(d.getRootNode().host)}return h(f)};return this._ctx[l]=n(`[context=${l}]`),this._ctx[l].addEventListener("update",()=>this.dispatchEvent(i)),this._ctx[l]}}debounce(l){var n;return function(){n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>l.apply(this,arguments))}}render(){if(typeof this.template=="function"){let l;this.css&&(l=typeof this.css=="function"?this.css():this.css);let n=this.template();typeof n=="object"?Q(this.root,_`${n}${_`<style>${l}</style>`}`):typeof n=="string"&&(this.root.innerHTML=`${n}<style>${l}</style>`),this.root.querySelectorAll("[ref]").forEach(c=>{this.refs[c.getAttribute("ref")]=c})}this.ready&&!this.isReady&&(this.ready(),this.isReady=!0),this.rendered&&this.rendered()}handleintersected(){new IntersectionObserver(l=>{l.forEach(n=>{n.isIntersecting&&this.intersected(n.intersectionRatio.toFixed(2))})},{root:null,rootMargin:"0px",threshold:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}).observe(this)}}!customElements.get(t.tag)&&customElements.define(t.tag,o,{extends:s})}export{yt as default,_ as html,mt as svg};
/*! (c) Andrea Giammarchi - ISC */
