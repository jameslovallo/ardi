var E=class extends Map{set(e,r){return super.set(e,r),r}},d=class extends WeakMap{set(e,r){return super.set(e,r),r}};var X=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,Y=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/?)>/g,Z=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,V=/[\x01\x02]/g,T=(t,e,r)=>{let s=0;return t.join("").trim().replace(Y,(n,i,f,l)=>{let o=i+f.replace(Z,"=$2$1").trimEnd();return l.length&&(o+=r||X.test(i)?" /":"></"+i),"<"+o+">"}).replace(V,n=>n===""?"<!--"+e+s+++"-->":e+s++)};var tt=({firstChild:t,lastChild:e})=>{let r=document.createRange();return r.setStartAfter(t),r.setEndAfter(e),r.deleteContents(),t},O=(t,e)=>t.nodeType===111?1/e<0?e?tt(t):t.lastChild:e?t.valueOf():t.firstChild:t,S=t=>{let{firstChild:e,lastChild:r}=t;if(e===r)return r||t;let{childNodes:s}=t,n=[...s];return{ELEMENT_NODE:1,nodeType:111,firstChild:e,lastChild:r,valueOf(){return s.length!==n.length&&t.append(...n),t}}};var{isArray:w}=Array,{indexOf:vt,slice:At}=[];var $=!1,C=class{constructor(e,r){$=!0,this._=(...s)=>e(...s,r)}};var L=t=>e=>{for(let r in e){let s=r==="role"?r:`aria-${r}`,n=e[r];n==null?t.removeAttribute(s):t.setAttribute(s,n)}},M=(t,e)=>{let r,s=!0,n=document.createAttributeNS(null,e);return i=>{if(r!==i)if(r=i,r==null)s||(t.removeAttributeNode(n),s=!0);else{let f=$&&i instanceof C?i._(t,e):i;f==null?(s||t.removeAttributeNode(n),s=!0):(n.value=f,s&&(t.setAttributeNodeNS(n),s=!1))}}},k=(t,e,r)=>s=>{r!==!!s&&((r=!!s)?t.setAttribute(e,""):t.removeAttribute(e))},et=({dataset:t})=>e=>{for(let r in e){let s=e[r];s==null?delete t[r]:t[r]=s}},N=(t,e)=>{let r,s,n=e.slice(2);return!(e in t)&&(s=e.toLowerCase())in t&&(n=s.slice(2)),i=>{let f=w(i)?i:[i,!1];r!==f[0]&&(r&&t.removeEventListener(n,r,f[1]),(r=f[0])&&t.addEventListener(n,r,f[1]))}},P=t=>{let e;return r=>{e!==r&&(e=r,typeof r=="function"?r(t):r.current=t)}},j=(t,e)=>e==="dataset"?et(t):r=>{t[e]=r},B=t=>{let e;return r=>{e!=r&&(e=r,t.textContent=r??"")}};var F=(t,e,r,s,n)=>{let i=r.length,f=e.length,l=i,o=0,c=0,a=null;for(;o<f||c<l;)if(f===o){let h=l<i?c?s(r[c-1],-0).nextSibling:s(r[l-c],0):n;for(;c<l;)t.insertBefore(s(r[c++],1),h)}else if(l===c)for(;o<f;)(!a||!a.has(e[o]))&&t.removeChild(s(e[o],-1)),o++;else if(e[o]===r[c])o++,c++;else if(e[f-1]===r[l-1])f--,l--;else if(e[o]===r[l-1]&&r[c]===e[f-1]){let h=s(e[--f],-1).nextSibling;t.insertBefore(s(r[c++],1),s(e[o++],-1).nextSibling),t.insertBefore(s(r[--l],1),h),e[f]=r[l]}else{if(!a){a=new Map;let h=c;for(;h<l;)a.set(r[h],h++)}if(a.has(e[o])){let h=a.get(e[o]);if(c<h&&h<l){let u=o,x=1;for(;++u<f&&u<l&&a.get(e[u])===h+x;)x++;if(x>h-c){let Q=s(e[o],0);for(;c<h;)t.insertBefore(s(r[c++],1),Q)}else t.replaceChild(s(r[c++],1),s(e[o++],-1))}else o++}else t.removeChild(s(e[o++],-1))}return r};var{isArray:A,prototype:rt}=Array,{indexOf:H}=rt;var{createDocumentFragment:st,createElement:nt,createElementNS:it,createTextNode:R,createTreeWalker:D,importNode:I}=new Proxy(document,{get:(t,e)=>t[e].bind(t)});var ot=t=>{let e=nt("template");return e.innerHTML=t,e.content},v,ct=t=>{v||(v=it("http://www.w3.org/2000/svg","svg")),v.innerHTML=t;let e=st();return e.append(...v.childNodes),e},W=(t,e)=>e?ct(t):ot(t);var lt=({childNodes:t},e)=>t[e],g=(t,e,r)=>F(t.parentNode,e,r,O,t),at=t=>{let e,r,s=[],n=i=>{switch(typeof i){case"string":case"number":case"boolean":e!==i&&(e=i,r||(r=R("")),r.data=i,s=g(t,s,[r]));break;case"object":case"undefined":if(i==null){e!=i&&(e=i,s=g(t,s,[]));break}if(A(i)){e=i,i.length===0?s=g(t,s,[]):typeof i[0]=="object"?s=g(t,s,i):n(String(i));break}e!==i&&"ELEMENT_NODE"in i&&(e=i,s=g(t,s,i.nodeType===11?[...i.childNodes]:[i]));break;case"function":n(i(t));break}};return n},ft=(t,e)=>{switch(e[0]){case"?":return k(t,e.slice(1),!1);case".":return j(t,e.slice(1));case"@":return N(t,"on"+e.slice(1));case"o":if(e[1]==="n")return N(t,e)}switch(e){case"ref":return P(t);case"aria":return L(t)}return M(t,e)};function q(t){let{type:e,path:r}=t,s=r.reduceRight(lt,this);return e==="node"?at(s):e==="attr"?ft(s,t.name):B(s)}var _=t=>{let e=[],{parentNode:r}=t;for(;r;)e.push(H.call(r.childNodes,t)),t=r,{parentNode:r}=t;return e},y="is\xB5",z=new d,ht=/^(?:textarea|script|style|title|plaintext|xmp)$/,m=()=>({stack:[],entry:null,wire:null}),ut=(t,e)=>{let{content:r,updates:s}=pt(t,e);return{type:t,template:e,content:r,updates:s,wire:null}},dt=(t,e)=>{let r=t==="svg",s=T(e,y,r),n=W(s,r),i=D(n,129),f=[],l=e.length-1,o=0,c=`${y}${o}`;for(;o<l;){let a=i.nextNode();if(!a)throw`bad template: ${s}`;if(a.nodeType===8)a.data===c&&(f.push({type:"node",path:_(a)}),c=`${y}${++o}`);else{for(;a.hasAttribute(c);)f.push({type:"attr",path:_(a),name:a.getAttribute(c)}),a.removeAttribute(c),c=`${y}${++o}`;ht.test(a.localName)&&a.textContent.trim()===`<!--${c}-->`&&(a.textContent="",f.push({type:"text",path:_(a)}),c=`${y}${++o}`)}}return{content:n,nodes:f}},pt=(t,e)=>{let{content:r,nodes:s}=z.get(e)||z.set(e,dt(t,e)),n=I(r,!0),i=s.map(q,n);return{content:n,updates:i}},b=(t,{type:e,template:r,values:s})=>{let n=G(t,s),{entry:i}=t;(!i||i.template!==r||i.type!==e)&&(t.entry=i=ut(e,r));let{content:f,updates:l,wire:o}=i;for(let c=0;c<n;c++)l[c](s[c]);return o||(i.wire=S(f))},G=({stack:t},e)=>{let{length:r}=e;for(let s=0;s<r;s++){let n=e[s];n instanceof p?e[s]=b(t[s]||(t[s]=m()),n):A(n)?G(t[s]||(t[s]=m()),n):t[s]=null}return r<t.length&&t.splice(r),r},p=class{constructor(e,r,s){this.type=e,this.template=r,this.values=s}};var J=t=>{let e=new d,r=s=>(n,...i)=>b(s,{type:t,template:n,values:i});return Object.assign((s,...n)=>new p(t,s,n),{for(s,n){let i=e.get(s)||e.set(s,new E);return i.get(n)||i.set(n,r(m()))},node:(s,...n)=>b(m(),new p(t,s,n)).valueOf()})},U=new d,K=(t,e)=>{let r=typeof e=="function"?e():e,s=U.get(t)||U.set(t,m()),n=r instanceof p?b(s,r):r;return n!==s.wire&&(s.wire=n,t.replaceChildren(n.valueOf())),t},xt=J("html"),mt=J("svg");function gt(t){let e=t?.extends?t.extends[0]:HTMLElement,r=t?.extends?t.extends[1]:void 0,s=Object.keys(t.props||{}),n=new Event("update");class i extends e{constructor(){super(),Object.assign(this,t),!this.shadow||this.shadow!==!1?(this.attachShadow({mode:"open"}),this.root=this.shadowRoot):this.root=this,typeof this.props=="object"&&this.defineProps(),typeof this.state=="function"&&this.defineState(),typeof this.intersect=="function"&&this.handleIntersect(),this.refs={}}connectedCallback(){this.addEventListener("update",this.debounce(this.render)),this.dispatchEvent(n),typeof this.ready=="function"&&this.ready()}defineProps(){s.forEach(l=>{let[o,c]=this.props[l];Object.defineProperty(this,l,{get:()=>{let a=this.getAttribute(l)||c;switch(o){case String:return a;case Boolean:return[!0,"true"].includes(a);default:return o(a)}},set:a=>this.setAttribute(l,a)})})}static get observedAttributes(){return s}attributeChangedCallback(){this.dispatchEvent(n)}defineState(){let l=o=>{if(o===null||typeof o!="object")return o;for(let c in o)o[c]=l(o[c]);return new Proxy(o,{get:(c,a)=>c[a],set:(c,a,h)=>(c[a]=l(h),this.dispatchEvent(n),!0),deleteProperty:(c,a)=>(delete c[a],this.dispatchEvent(n),!0)})};this._state=l(this.state()),delete this.state,Object.keys(this._state).forEach(o=>{Object.defineProperty(this,o,{get:()=>this._state[o],set:c=>this._state[o]=c})})}context(l){if(this._ctx||(this._ctx={}),this._ctx[l])return this._ctx[l];{let o=(c,a=this)=>{function h(u){if(!u||u===document||u===window)return null;let x=u.closest(c);return x||h(u.getRootNode().host)}return h(a)};return this._ctx[l]=o(`[context=${l}]`),this._ctx[l].addEventListener("update",()=>this.dispatchEvent(n)),this._ctx[l]}}debounce(l){var o;return function(){var c=this,a=arguments;o&&window.cancelAnimationFrame(o),o=window.requestAnimationFrame(function(){l.apply(c,a)})}}render(){let l=this.template();typeof l=="object"?K(this.root,l):typeof l=="string"&&(this.root.innerHTML=l),this.root.querySelectorAll("[ref]").forEach(o=>{this.refs[o.getAttribute("ref")]=o}),this.updated&&this.updated()}handleIntersect(){new IntersectionObserver(l=>{l.forEach(o=>{o.isIntersecting&&this.intersect(o.intersectionRatio.toFixed(2))})},{root:null,rootMargin:"0px",threshold:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}).observe(this)}}!customElements.get(t.tag)&&customElements.define(t.tag,i,{extends:r})}export{gt as default,xt as html,mt as svg};
/*! (c) Andrea Giammarchi - ISC */
