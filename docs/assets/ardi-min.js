export default t=>{class e extends HTMLElement{connectedCallback(){Object.assign(this,t),this.DOM=this.shadow?this.attachShadow({mode:"open"}):this,this.props&&Object.keys(this.props()).forEach((t=>{const e=this.props()[t],s=this.getAttribute(t);this[t]="function"==typeof e?e(s):s||e})),this.render=()=>{const t=this.styles?`<style>${this.styles()}</style>`:"",e=this.template?this.template():"";this.DOM.innerHTML=t+e,e.match(/@[a-z]+/gi)?.forEach((t=>{const e=t.replace("@","");this.DOM.querySelectorAll(`[\\${t}]`).forEach((s=>{let i=this[s.getAttribute(t)];"function"==typeof this[s.getAttribute(t)]&&(s.removeAttribute(t),s.addEventListener(e,(t=>{i.apply(this,[t])})))}))})),this.refs={},this.DOM.querySelectorAll("[ref]").forEach((t=>{t.on=(e,s=s)=>{t.addEventListener(e,(t=>{s.apply(this,[t])}))},this.refs[t.getAttribute("ref")]=t})),this.ready&&this.ready()},this.render(),"function"==typeof this.intersect&&new IntersectionObserver((t=>t.forEach((t=>{t.isIntersecting&&this.intersect(t.intersectionRatio.toFixed(2))}))),{root:null,rootMargin:"0px",threshold:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}).observe(this)}}!customElements.get(t.component)&&customElements.define(t.component,e)};